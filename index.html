<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">  
  <title>Emerging tech</title>
  <style type="text/css">body{font-family: sans-serif;}</style>
</head>
<body>

  <h1>Emerging tech, yo</h1>
  <h2 id="data">-</h2>

  <input><button>&rarr;</button>

  <script src="bower_components/pubnub/web/pubnub.min.js"></script>
  <script type="text/javascript">

    var pubnub = PUBNUB.init({
      subscribe_key: 'sub-c-9c92c072-698f-11e4-97dd-02ee2ddab7fe',
      publish_key: 'pub-c-10a63f9f-359c-472b-a6ba-d55766a60e69'
    });

    pubnub.subscribe({
      channel: 'dc42',
      backfill: true,
      callback: function(message){
        if(message.value){
          var v = message.value;
          document.body.style.backgroundColor = 'rgb('+v+','+v+','+v+')';
          document.body.style.color = v < 127 ? '#fff' : '#000';
          document.getElementById('data').innerText = v;
        }
      }
    });



 
    document.querySelector('button').onclick = function(){
      var val = document.querySelector('input').value || 'poop';

      pubnub.publish({
        channel:'inbound',
        message:{
          node: 'sup, yo',
          payload: val
        }
      })

      console.log("--")

    }


  </script>
</body>
</html>